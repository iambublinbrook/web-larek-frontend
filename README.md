# Проектная работа "Веб-ларек"
***

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
***
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка
***

```
npm run build
```

или

```
yarn build
```
## Описание проекта:
***
Web-ларёк — это интернет-магазин с товарами для веб-разработчиков 
В нём можно посмотреть каталог полезных для фронтенд-разработчиков товаров, добавить их в корзину и сделать заказ. 

## Основные функции проекта:
***
- **Просмотр каталога товаров**  
  Ознакомьтесь с товарами для веб-разработчиков: от таблеток для прокачки софт-скилов до портативного телепорта.

- **Работа с корзиной**  
  Добавляйте, удаляйте товары в корзину.

- **Оформление заказа**  
  Простой и понятный процесс оформления заказа. Можно выбрать способ оплаты, указать адрес доставки. 


## Архитектура проекта:
***

Пооект построен по паттерну **MVP (Model-View-Presenter)** с использованием брокера событий для взаимодействия между компонентами. Это обеспечивает четкое разделение отвственности.

### Model (AppState)
- Хранит и управляет состоянием приложения.
- Содержит бизнес-логику и данные.
- При изменении состояния **генерирует события** через брокер.

### View (UI-компоненты)
- Отвечает за отображение интерфейса.
- Не взаимодействует с моделью напрямую.
- Подписывается на события и обновляет отображение при их получении.

### Presenter (Связующий слой)
- Выступает в роли посредника между Model и View.

# Базовый код
***

## Class Component<T>
Абстрактный класс, от которого наследуются все UI-компоненты. 

Методы:
- `render` — Отвечает за обновление данных компонента. Возвращает контейнер компонента
- `setText` — Отвечает за обновление текста. Устанавливает текстовое содержимое для переданного элемента 
- `setImage` — Отвечает за отображение изображений. Устанавливает альтернативный текст для изображений
- `toggleClass` — Отвечет за динамическое изменение внешнего вида, переключает класс для переданного элемента 
- `setHidden`, `setVisible` — Отвечают за управление видимостью элементов. Скрывают и отображают переданные элементы 
- `setDisabled` — Отвечает за блокировку интерактивных элементов 

## Class Api
Базовый класс, предназначен для выполнения запросов к Api.

Методы:
- `GET` — выполняет GET-запрос по указанному URL.
- `POST` — выполняет POST/PUT/DELETE запросы.
- `handleResponse` — обрабатывает ответ от сервера.

## Class EventEmitter
Брокер событий: позволяет объектам подписываться на события, отписываться от них, и инициировать события. 

Методы: 
- `on/off` — подписывает от отписывает от события.
- `onALL/onOFF` — отписывает и подписывает на все. 
- `emit` — инициалицирует событие. 
- `trigger` — создет триггер для события. 

# Слой данных
***

## Class Model<T>
Базовый абстрактный клас для всех моделей приложения. Отвечет за хранение и инициализацию данных, а также за уведомление других компонентов через шину события. 

Методы:
- `emitChanges` — генерирует событие, оповещая подписчиков о произошедшем изменении. 

## Class AppState 
Центральное состояние приложения. Управляет каталогом товаров, корзиной, оформлением заказа, валидацией форм. Наследуется от Model.

Методы:
- `setCatalog(items)` — устанавливает каталог продутов
- `setPreview(item)` — устанавливает предпросмотр продукта
- `getProduct(id)` — возвращает товар по ID
- `addProductToBasket(item)` — добавляет товар в корзину
- `deleteProductFromBasket(item)` — удаляет товар из корзины
- `toggleBasketItem(item)` — переключает наличие товара в корзине
- `getBasketTotal()` — устанавливает общую сумму товаров
- `getBasketCount()` — устанавливает количество товаров в корзине
- `clearBasket()` — очищает корзину
- `getProductIndex(item)` — возвращает индекс товара в корзине
- `setOrderField(field, value)` — обновляет поле заказа
- `setOrderPayment(value)` — назначает способ оплаты товара и запускает валидацию
- `validateOrder()` — валидирует обязательные поля заказа: способ оплаты и адрес
- `validateContacts()` — валидирует контактные данные клиента
- `getOrderData()` — формирует данные заказа для отправки на сервер
- `clearOrder()` — сбрасывает данные заказа, возвращает к начальному состоянию

# Слой представления(View)
***

## Class Form
Общий класс ддя всех форм приложения

Свойства:
- `_submit`: кнопка отправки
- `_errors`: элемент для ошибок
- `_buttons`: кнопка оплаты

События:
- `orderInput:change` — пользователь изменил поле (передаёт `field` и `value`)
- `${formName}:submit` — форма отправлена

Методы:
- `onInputChange` — обработка изменения полей
- `valid` — управление доступностью кнопки
- `errors` — установка текста ошибок
- `render` — отрисовка формы

## Class OrderContacts
Класс формы для ввода контактной информации при оформлениии заказа. Наследуется от Form. 

Свойства:
- `_email`: поле ввода электронной почты
- `_phone`: поле ввода номера телефона

События
- `orderInput:change` — пользователь изменил поле (передаёт `field` и `value`)
- `contacts:submit` — форма отправлена

Методы:
- `set email(value: string)` — устанавливает значение в поле электронной почты.
- `set phone(value: string)` — устанавливает значение в поле телефона.
- `set valid(value: boolean)` — управляет состояние кнопки отправки.

## Class OrderForm
Класс формы для выбора способа оплаты и ввода адреса доставки. наследуется от Form. 

Свойства:
- `_cardButton`, `_cashButton` — кнопки выбора способа оплаты
- `_address` — поле ввода адреса
- `_nextButton` — кнопка «Далее»

События:
- `payment:change` — пользователь выбрал способ оплаты
- `orderInput:change` — изменилось поле (например, адрес)
- `order:submit` — форма отправлена

Методы:
- `address` — установка значения адреса
- `valid` — блокировка/разблокировка кнопки «Далее»
- `togglePayment()` / `clearPayment()` — управление стилем кнопок оплаты

## Class Basket
Управляет отображением интерфейса корзины — списка товаров, общей стоимости, кнопки оформления заказа. UI-компонент.

Свойства: 
- `_list` — контейнер для товаров
- `_total` — отображение общей стоимости
- `_button` — кнопка «Оформить заказ»

События:
- `order:open` — кнопка нажата, открываем форму заказа

Методы:
- `items` — устанавливает список отрисованных карточек
- `total` — устанавливает итоговую сумму
- `block` — блокирует/разблокирует кнопку

## Modal
Модальное окно приложения. Управляет открытием, закрытием, контентом и поведением модальных окон. 

Свойства:
- `_content`: контейнер для содержимого
- `_closeButton`: кнопка закрытия

 Методы:
- `content` — устанавливает содержимое
- `open()` — открытие окна
- `close()` — закрытие окна
- `render(data)` — отрисовка и открытие модального окна

События:
- `modal:open` — окно открыто
- `midal:close` — окно закрыто

## Page
Класс страницы приложения. Управляет основным UI-состоянием: отображением каталога товаров, счетчиком корзины и блокировкой при открытом моальном окне.

Свойства:
- `_gallery`: контейнер галереи
- `_basketCounter`: счетчик товаров
- `_basketButton`: кнопка открытия корзины

Методы:
- `catalog`: установка элементов галереи
- `counter`: обновление счетчика
- `locked`: блокировка/разблокировка страницы

События:
- `basket:open` — клиент нажал на корзину

## Карточка товара ProductCard
Базовый клсс для всех типов карточек товаров. Реализует общее поведение и отображение: заголовок, изображение, цену, категорию, кнопкой. Служит основой для версий: каталог, превью, корзина. 

### Наследники
- `ProductCardCatalog` — карточка в каталоге (реагирует на клик)
- `ProductCardPreview` — детальное описание товара
- `ProductCardBasket` — товар в корзине (с номером и кнопкой удаления)

Свойства: 
- `_title` — заголовок товара
- `_price` — цена товара
- `_image` — изображение товара
- `_category` — категория товара
- `_description` — описание
- `_button` — кнопка действия
 - `_id` — уникальный индетификатор товара

 Методы:
 - `id` — используется для идентификации
 - `image` — устанавливает изображение
 - `title`, `description` — устанавливают текстовое содержимое
 - `category` — устанавливает текст и добавляет CSS-класс
 - `price` — форматирует цену
 - `button` — устанавливает текст кнопки
 - `handleButtonClick` — обработчик, генерирует card:button-click

События
- `catalog:select` — выбран товар
- `button:status` — изменить статус (в корзине/не в корзине)
- `basket:delete` — удалить из корзины


## SuccessView
Экран успешного заказа

Свойства:
- `_description`: элемент для отображения суммы
- `_closeButton`: кнопка закрытия

 Методы:
- `total`: установка суммы заказа

События:
- `order:finished` — клиент закрыл экран

# Слой коммуникации
***

## ApiService
Класс для взаимодействия с API магазина. Отвечает за получение данных о товаров 

### Поля:
- `cdn`: URL CDN для изображений
- `baseUrl`: базовый URL API

### Методы:
- `getProductItem(id: string)`: получение продукта по ID
- `getProductList()`: получение каталога товаров
- `orderItems(order: OrderConfirm)`: оформление заказа
